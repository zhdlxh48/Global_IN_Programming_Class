<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            padding: 0;
            margin: 0;
            color: #333;
        }

        ul {
            list-style: none;
        }

        #container {
            padding: 30px 20px;
        }

        h1 {
            font-size: large;
            border-left: 10px solid #7BAEB5;
            border-bottom: 1px solid #7BAEB5;
            padding: 10px;
            width: auto;
        }

        #comment_write {
            padding: 20px 15px;
            border-bottom: 1px solid #7BAEB5;
        }

        #comment_write label {
            display: inline-block;
            width: 80px;
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        #comment_write input[type='text'],
        #comment_write textarea {
            border: 1px solid #ccc;
            vertical-align: middle;
            padding: 3px 10px;
            font-size: 12px;
            line-height: 150%;
        }

        #comment_write textarea {
            width: 380px;
            height: 90px;
        }

        .comment_item {
            font-size: 13px;
            color: #333;
            padding: 15px;
            border-bottom: 1px dotted #ccc;
            line-height: 150%;
        }

        .comment_item .writer {
            color: #555;
            line-height: 200%;

        }

        .comment_item .writer input {
            vertical-align: middle;

        }

        .comment_item .writer .name {
            color: #222;
            font-weight: bold;
            font-size: 14px;
        }
    </style>

    <script src="../lib/jquery-1.11.0.min.js"></script>
    <script>
        $(() => {
            $("#comment_form").submit(() => {
                if (!$("#user_name").val()) {
                    alert("이름을 입력하세요");
                    $("#user_name").focus();
                    return false;
                }

                if (!$("#comment").val()) {
                    alert("내용을 입력하세요");
                    $("#comment").focus();
                    return false;
                }

                // 작성 날짜 만듦
                let date = new Date();
                let yy = date.getFullYear();
                let mm = date.getMonth() + 1;
                let dd = date.getDate();
                let hh = date.getHours();
                let mi = date.getMinutes();
                let ss = date.getSeconds();

                // 자리수 보정
                if (mm < 10) {
                    mm = "0" + mm;
                }
                if (dd < 10) {
                    dd = "0" + dd;
                }
                if (hh < 10) {
                    hh = "0" + hh;
                }
                if (mi < 10) {
                    mi = "0" + mi;
                }
                if (ss < 10) {
                    ss = "0" + ss;
                }

                const today = `${yy}-${mm}-${dd} ${hh}:${mi}:${ss}`;

                // 새로운 글이 추가 될 li 태그 객체
                let new_li = $("<li>").addClass("comment_item");

                // 작성자 정보가 지정될 p 태그 객체
                let writer_p = $("<p>").addClass("writter");

                // 작성자 이름 span 태그 객체
                let name_span = $("<span>").addClass("name").html($("#user_name").val() + "님");

                // 작성 일시
                let date_span = $("<span>").html(` / ${today} `);

                // 삭제 버튼
                let del_input = $("<input>").attr({
                    "type": "button",
                    "value": "삭제"
                }).addClass("delete_btn");

                // 내용
                let content_p = $("<p>").html($("#comment").val());

                // 컴포넌트 완성하기
                // writer_p.append(name_span).append(date_span).append(del_input);
                // new_li.append(writer_p).append(content_p);
                // $("#comment_list").append(new_li);
                $("#comment_list").append(
                    new_li.append([
                        writer_p.append([name_span, date_span, del_input]),
                        content_p])
                );

                // 입력 내용 지우기
                $("#user_name").val("");
                $("#comment").val("");

                return false;
            });



            $(document).on("click", ".delete_btn", function () {
                if (confirm("정말로 선택하신 항목을 삭제하시겠습니까?"))
                    $(this).parents(".comment_item").remove();
            });
        });
    </script>
</head>

<body>
    <div id="container">
        <h1>JQuery Comment</h1>

        <div id="comment_write">
            <form id="comment_form">
                <div>
                    <label for="user_name">작성자</label>
                    <input type="text" name="user_name" id="user_name">
                    <input type="submit" value="저장하기">
                </div>

                <div>
                    <label for="comment">댓글 내용</label>
                    <textarea name="comment" id="comment"></textarea>
                </div>
            </form>
        </div>

        <ul id="comment_list">

        </ul>
    </div>
</body>

</html>